import{_ as C,S as N,R as y,a as B,s as I,g,C as M,T as A,E as O,W,b as D}from"./shareTable-c72002d9.js";import{d as H,r as L,b as m,e as V,f as R,o as s,c as n,g as o,w as p,F as f,a as l,h as w,t as i,i as G,u as j,p as q,j as P,_ as z}from"./index-b5ad4127.js";const J=H("fleet",()=>{const a=L({shipList:[]}),r=L({shipList:[]}),t=m(()=>E(a.value)),h=m(()=>E(r.value)),v=m(()=>{const d=[];return t.value.shipGroup.forEach(F=>{F.ship.weaponList.forEach(S=>{d.push(K(S,r.value))})}),d});return{ourFleet:a,enemyFleet:r,groupedOurFleet:t,groupedEnemyFleat:h,ourFleetSharePoolList:v}});function E(a){const r={shipGroup:[]};return a.shipList.forEach(t=>{const h=r.shipGroup.find(v=>v.ship.name==t.name);h?h.count++:r.shipGroup.push({ship:C.cloneDeep(t),count:1})}),r}function K(a,r){let t=r.shipList;a.shootMode==N.DirectFire&&(t=r.shipList.filter(d=>d.shipTemplate.standRow==y.Front));let h=B.Frigate;t.forEach(d=>{const F=b(a,h);b(a,d.shipTemplate.shipType)<F&&(h=d.shipTemplate.shipType)}),t=t.filter(d=>d.shipTemplate.shipType==h);const v=I.get(t.length);return{weaponName:a.name,shareNumber:v||0,shipList:t}}function b(a,r){return a.attackSequence.findIndex(t=>t==r)}const _=a=>(q("data-v-34afd918"),a=a(),P(),a),Q={class:"fleet-root"},U=_(()=>l("div",{class:"fleet-row"},"后排",-1)),X=_(()=>l("div",{class:"fleet-row"},"中排",-1)),Y=_(()=>l("div",{class:"fleet-row"},"前排",-1)),Z={class:"fleet-root"},$=_(()=>l("div",{class:"fleet-row"},"前排",-1)),ee=_(()=>l("div",{class:"fleet-row"},"中排",-1)),te=_(()=>l("div",{class:"fleet-row"},"后排",-1)),se=_(()=>l("br",null,null,-1)),ne={class:"fleet-root"},ae=_(()=>l("div",{class:"fleet-row"},"舰队武器分摊池",-1)),oe=_(()=>l("br",null,null,-1)),re=_(()=>l("div",{class:"be-attacked-ship"},"可以攻击的敌方舰船：",-1)),ie=V({__name:"index",setup(a){const r={shipList:[...g(M,5),...g(A,3),...g(O,3),...g(W,5),...g(D,2)]},t=J();t.ourFleet=r,t.enemyFleet=r;const h=m(()=>t.groupedOurFleet.shipGroup.filter(u=>u.ship.shipTemplate.standRow==y.Front)),v=m(()=>t.groupedOurFleet.shipGroup.filter(u=>u.ship.shipTemplate.standRow==y.Middle)),d=m(()=>t.groupedOurFleet.shipGroup.filter(u=>u.ship.shipTemplate.standRow==y.Back)),F=m(()=>t.groupedEnemyFleat.shipGroup.filter(u=>u.ship.shipTemplate.standRow==y.Front)),S=m(()=>t.groupedEnemyFleat.shipGroup.filter(u=>u.ship.shipTemplate.standRow==y.Middle)),x=m(()=>t.groupedEnemyFleat.shipGroup.filter(u=>u.ship.shipTemplate.standRow==y.Back));return(u,le)=>{const c=R("a-col"),k=R("a-row");return s(),n(f,null,[o(k,{gutter:8},{default:p(()=>[o(c,{span:12},{default:p(()=>[l("div",Q,[o(k,{gutter:8},{default:p(()=>[o(c,{span:8},{default:p(()=>[U,(s(!0),n(f,null,w(d.value,e=>(s(),n("div",{class:"fleet-row",key:e.ship.name},i(e.ship.name)+" * "+i(e.count),1))),128))]),_:1}),o(c,{span:8},{default:p(()=>[X,(s(!0),n(f,null,w(v.value,e=>(s(),n("div",{class:"fleet-row",key:e.ship.name},i(e.ship.name)+" * "+i(e.count),1))),128))]),_:1}),o(c,{span:8},{default:p(()=>[Y,(s(!0),n(f,null,w(h.value,e=>(s(),n("div",{class:"fleet-row",key:e.ship.name},i(e.ship.name)+" * "+i(e.count),1))),128))]),_:1})]),_:1})])]),_:1}),o(c,{span:12},{default:p(()=>[l("div",Z,[o(k,{gutter:8},{default:p(()=>[o(c,{span:8},{default:p(()=>[$,(s(!0),n(f,null,w(F.value,e=>(s(),n("div",{class:"fleet-row",key:e.ship.name},i(e.ship.name)+" * "+i(e.count),1))),128))]),_:1}),o(c,{span:8},{default:p(()=>[ee,(s(!0),n(f,null,w(S.value,e=>(s(),n("div",{class:"fleet-row",key:e.ship.name},i(e.ship.name)+" * "+i(e.count),1))),128))]),_:1}),o(c,{span:8},{default:p(()=>[te,(s(!0),n(f,null,w(x.value,e=>(s(),n("div",{class:"fleet-row",key:e.ship.name},i(e.ship.name)+" * "+i(e.count),1))),128))]),_:1})]),_:1})])]),_:1})]),_:1}),se,o(k,{gutter:8},{default:p(()=>[o(c,{span:6},{default:p(()=>[l("div",ne,[ae,(s(!0),n(f,null,w(j(t).ourFleetSharePoolList,e=>(s(),n("div",{class:"fleet-row",key:e.weaponName},[l("div",null,[G(" 武器名称： "+i(e.weaponName)+" ",1),oe,G(" 分摊数： "+i(e.shareNumber),1)]),re,(s(!0),n(f,null,w(e.shipList,T=>(s(),n("div",{class:"be-attacked-ship",key:T.name},i(T.name),1))),128))]))),128))])]),_:1}),o(c,{span:6}),o(c,{span:6}),o(c,{span:6})]),_:1})],64)}}});const ce=z(ie,[["__scopeId","data-v-34afd918"]]);export{ce as default};
